<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>Create Workspace</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            font-family: Segoe UI, Arial
        }


        .container {
            display: flex;
            height: calc(100vh - 70px)
        }

        .sidebar {
            width: 220px;
            background: linear-gradient(#4b1f57, #2a0d2e);
            color: #fff;
            padding: 24px
        }

        .main {
            flex: 1;
            padding: 30px
        }

        label {
            display: block;
            margin-top: 12px;
            font-weight: 600;
            color: #4b1f57
        }

        input[type="text"],
        textarea {
            width: 100%;
            padding: 8px;
            margin-top: 6px;
            border-radius: 6px;
            border: 1px solid #ccc
        }

        .row {
            display: flex;
            gap: 12px;
            align-items: center;
            margin-top: 12px
        }

        .btn {
            padding: 8px 12px;
            border-radius: 6px;
            border: 0;
            cursor: pointer
        }

        .add-members {
            background: #7da6d9;
            color: #fff
        }

        .save-ws {
            background: #4b1f57;
            color: #fff;
            margin-left: 8px
        }

        .members-list {
            display: flex;
            gap: 8px;
            margin-top: 12px;
            flex-wrap: wrap
        }

        .member-bubble {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: #333;
            color: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative
        }

        .member-bubble .remove {
            position: absolute;
            top: -6px;
            right: -6px;
            background: #fff;
            color: #333;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            cursor: pointer;
            border: 1px solid #ccc
        }

        :root {
            --purple-1: #3b0f4b;
            --purple-2: #5e2b6b;
            --peach: #f3d9cf;
            --muted: #8b6f78;
            --card: #b89697;
            --bg-dark: #161616;
            --white: #ffffff;
            --shadow: 0 6px 18px rgba(11, 5, 10, 0.3);
            font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
        }

        body {
            background: #f6dfd6
        }

        /* TOP BAR */
        .topbar {
            height: 72px;
            background: linear-gradient(90deg, var(--purple-2), var(--purple-1));
            color: #fff;
            display: flex;
            align-items: center;
            padding: 0 22px;
            gap: 12px;
            /* new: guarantee full width */
            width: 100%;
            /* position: relative; */
            justify-content: space-between;
        }

        .topbar-left {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        /* Change: .topbar-icons is now at flex-start (left side) */
        .topbar-icons {
            display: flex;
            gap: 40px;
            align-items: center;
            /* remove margin-right: auto; */
        }

        .icon-btn {
            background: rgba(255, 255, 255, 0.08);
            border: none;
            color: #fff;
            width: 44px;
            height: 44px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }


        .brand {
            font-size: 22px;
            font-weight: 700
        }

        .icons {
            margin-left: 30px;
            display: flex;
            gap: 20px;
            font-size: 20px
        }

        .search {
            margin-left: auto
        }

        .search input {
            padding: 10px 16px;
            border-radius: 20px;
            border: none;
            width: 360px;
        }
    </style>
</head>

<body>
    <header class="topbar" role="navigation" aria-label="Main navigation">
        <p> <b>Build Team</b></p>
        <div class="topbar-icons" style="margin-left: 300px;">
            <a href="home.html" class="icon-btn" aria-label="Home" title="Home">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                    <path d="M3 11.5L12 4l9 7.5V20a1 1 0 0 1-1 1h-5v-6H9v6H4a1 1 0 0 1-1-1V11.5z" stroke="currentColor"
                        stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
            </a>

            <a href="../friend/friend.html" class="icon-btn" aria-label="Team" title="Team">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                    <path d="M17 21v-2a4 4 0 0 0-4-4H7a4 4 0 0 0-4 4v2" stroke="currentColor" stroke-width="1.5"
                        stroke-linecap="round" stroke-linejoin="round" />
                    <circle cx="9" cy="7" r="4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                        stroke-linejoin="round" />
                    <path d="M23 21v-2a4 4 0 0 0-3-3.87" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                        stroke-linejoin="round" />
                </svg>
            </a>
            <button class="icon-btn" title="Chat" aria-label="Chat">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                    <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" stroke="currentColor"
                        stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
            </button>
            <button class="icon-btn" title="Notifications" aria-label="Notifications">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                    <path d="M18 8a6 6 0 0 0-12 0c0 7-3 8-3 8h18s-3-1-3-8" stroke="currentColor" stroke-width="1.5"
                        stroke-linecap="round" stroke-linejoin="round" />
                    <path d="M13.73 21a2 2 0 0 1-3.46 0" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                        stroke-linejoin="round" />
                </svg>
            </button>
        </div>
        <div class="topbar-search">
            <div class="search" role="search">
                <input id="searchInput" type="search" placeholder="Search for teammate with multiple skills"
                    aria-label="Search" />

            </div>
        </div>
    </header>
    <div class="container">
        <aside class="sidebar">
            <div
                style="width:60px;height:60px;border-radius:50%;background:#000;color:#fff;display:flex;align-items:center;justify-content:center">
                A</div>
            <div style="margin-top:10px">Ayusha</div>
        </aside>

        <main class="main">
            <h2 style="text-align:center;color:#4b1f57">Create Workspace</h2>

            <label>Title</label>
            <input id="wsTitle" type="text" placeholder="Enter workspace title">

            <label>Description</label>
            <textarea id="wsDesc" rows="4" pla<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Create Workspace — BuildTeam</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<style>
  *{box-sizing:border-box;margin:0;padding:0;font-family:Segoe UI,Arial}
  body{background:#f6dfd6}
  .topbar{height:70px;background:linear-gradient(#5c2a62,#37143a);color:#fff;display:flex;align-items:center;padding:0 20px}
  .brand{font-weight:700}
  .container{display:flex;height:calc(100vh - 70px)}
  .sidebar{width:220px;background:linear-gradient(#4b1f57,#2a0d2e);color:#fff;padding:24px}
  .main{flex:1;padding:30px;overflow:auto}
  h2{color:#4b1f57;text-align:center;margin-bottom:12px}
  label{display:block;margin-top:12px;font-weight:600;color:#4b1f57}
  input[type="text"], textarea{width:100%;padding:8px;margin-top:6px;border-radius:6px;border:1px solid #ccc}
  .row{display:flex;gap:12px;align-items:center;margin-top:12px}
  .btn{padding:8px 12px;border-radius:6px;border:0;cursor:pointer}
  .add-members{background:#7da6d9;color:#fff}
  .save-ws{background:#4b1f57;color:#fff;margin-left:8px}
  .members-list{display:flex;gap:8px;margin-top:12px;flex-wrap:wrap}
  .member-bubble{position:relative;display:flex;align-items:center;justify-content:center;width:44px;height:44px;border-radius:50%;background:#333;color:#fff;font-weight:700}
  .member-bubble .remove{position:absolute;top:-6px;right:-6px;background:#fff;color:#333;border-radius:50%;width:18px;height:18px;display:flex;align-items:center;justify-content:center;font-size:12px;cursor:pointer;border:1px solid #ccc}
  .hint{font-size:13px;color:#555;margin-top:10px}
</style>
</head>
<body>
  <div class="topbar"><div class="brand">BuildTeam</div></div>

  <div class="container">
    <aside class="sidebar">
      <div style="width:60px;height:60px;border-radius:50%;background:#000;color:#fff;display:flex;align-items:center;justify-content:center">A</div>
      <div style="margin-top:10px">Ayusha</div>
    </aside>

    <main class="main">
      <h2>Create Workspace</h2>

      <label for="wsTitle">Title</label>
      <input id="wsTitle" type="text" placeholder="Enter workspace title">

      <label for="wsDesc">Description</label>
      <textarea id="wsDesc" rows="4" placeholder="Describe this workspace"></textarea>

            <div class="row" style="align-items:flex-start;">
                <button id="addMembersBtn" class="btn add-members">+ Add member</button>
                <div id="membersPreview" class="members-list" aria-live="polite" title="Selected members"></div>

                <div style="margin-left:auto;display:flex;gap:8px;">
                    <button id="saveWorkspace" class="btn save-ws">Save workspace</button>
                </div>
            </div>

            <div class="hint">Tip: click Add member to pick from your friends. In the friend list use the checkboxes on
                the left to select.</div>
        </main>
    </div>

    <script>
        /* workspace-form.html
           - Loads the draft (currentWorkspaceDraft) and shows title/description and selected members preview
           - Clicking Add member saves current draft and redirects to friend.html
           - Removing a member from preview updates the draft
           - Clicking Save workspace validates and stores the workspace in 'workspaces' localStorage and returns to workspace.html
        */

        // helper dataset (friend names used for preview)
        // NOTE: friend list lives in friend.html (same friend IDs/names must match).
        const FRIENDS = [
            { id: 1, name: 'Pragun rai' },
            { id: 2, name: 'Rohan shrestha' },
            { id: 3, name: 'Jiya verma' }
        ];

        function getDraft() {
            return JSON.parse(localStorage.getItem('currentWorkspaceDraft') || '{"title":"","description":"","members":[]}');
        }
        function setDraft(d) {
            localStorage.setItem('currentWorkspaceDraft', JSON.stringify(d));
        }

        // render draft fields and preview members
        function renderDraft() {
            const draft = getDraft();
            document.getElementById('wsTitle').value = draft.title || '';
            document.getElementById('wsDesc').value = draft.description || '';
            renderMembersPreview(draft.members || []);
        }

        function renderMembersPreview(memberIds) {
            const container = document.getElementById('membersPreview');
            container.innerHTML = '';
            (memberIds || []).forEach(id => {
                const f = FRIENDS.find(xx => xx.id === id) || { id, name: 'Unknown' };
                const bubble = document.createElement('div');
                bubble.className = 'member-bubble';
                bubble.title = f.name;
                bubble.innerHTML = `${getInitials(f.name)}<div class="remove" data-id="${id}">✕</div>`;
                container.appendChild(bubble);
            });
        }

        function getInitials(name) {
            return (name || '').split(' ').map(s => s[0] || '').slice(0, 2).join('').toUpperCase();
        }

        // Save current inputs to draft and go to friend.html
        document.getElementById('addMembersBtn').addEventListener('click', () => {
            const draft = getDraft();
            draft.title = document.getElementById('wsTitle').value;
            draft.description = document.getElementById('wsDesc').value;
            setDraft(draft);
            window.location.href = '../friend/friend.html';
        });

        // remove member click (bubble cross)
        document.getElementById('membersPreview').addEventListener('click', (e) => {
            const rem = e.target.closest('.remove');
            if (!rem) return;
            const id = Number(rem.dataset.id);
            const draft = getDraft();
            draft.members = (draft.members || []).filter(m => m !== id);
            setDraft(draft);
            renderMembersPreview(draft.members);
        });

        // save workspace permanently
        document.getElementById('saveWorkspace').addEventListener('click', () => {
            const title = document.getElementById('wsTitle').value.trim();
            if (!title) { alert('Please enter a workspace title'); return; }
            const desc = document.getElementById('wsDesc').value.trim();
            const draft = getDraft();
            const ws = { title, description: desc, members: draft.members || [] };

            const all = JSON.parse(localStorage.getItem('workspaces') || '[]');
            all.unshift(ws); // newest first
            localStorage.setItem('workspaces', JSON.stringify(all));

            // clear draft and go back to workspace list
            localStorage.removeItem('currentWorkspaceDraft');
            window.location.href = 'workspace.html';
        });

        // persist title & desc changes in draft so friend.html sees latest
        document.getElementById('wsTitle').addEventListener('input', (e) => {
            const d = getDraft(); d.title = e.target.value; setDraft(d);
        });
        document.getElementById('wsDesc').addEventListener('input', (e) => {
            const d = getDraft(); d.description = e.target.value; setDraft(d);
        });

        // on load render existing draft
        document.addEventListener('DOMContentLoaded', renderDraft);

        // also react to storage changes (when friend.html updates draft and returns)
        window.addEventListener('storage', (e) => {
            if (e.key === 'currentWorkspaceDraft') renderDraft();
        });
    </script>
</body>

</html>
ceholder="Describe this workspace"></textarea>

<div class="row">
    <button id="addMembersBtn" class="btn add-members">+ Add member</button>
    <div id="membersPreview" class="members-list" aria-live="polite"></div>
    <button id="saveWorkspace" class="btn save-ws">Save workspace</button>
</div>
</main>
</div>

<script>
    // friend dataset (ids, name, initials)
    const FRIENDS = [
        { id: 1, name: 'Pragun rai' },
        { id: 2, name: 'Rohan shrestha' },
        { id: 3, name: 'Jiya verma' },
        { id: 4, name: 'Sita kumari' }
    ];

    function loadDraft() {
        const draft = JSON.parse(localStorage.getItem('currentWorkspaceDraft') || '{}');
        if (draft.title) document.getElementById('wsTitle').value = draft.title;
        if (draft.description) document.getElementById('wsDesc').value = draft.description;
        renderMembers(draft.members || []);
    }

    function saveDraft() {
        const draft = {
            title: document.getElementById('wsTitle').value,
            description: document.getElementById('wsDesc').value,
            members: JSON.parse(localStorage.getItem('currentWorkspaceDraft') || '{}').members || []
        };
        localStorage.setItem('currentWorkspaceDraft', JSON.stringify(draft));
    }

    function renderMembers(memberIds) {
        const container = document.getElementById('membersPreview');
        container.innerHTML = '';
        (memberIds || []).forEach(id => {
            const f = FRIENDS.find(x => x.id === id);
            if (!f) return;
            const bubble = document.createElement('div');
            bubble.className = 'member-bubble';
            bubble.title = f.name;
            bubble.innerHTML = `${getInitials(f.name)}<div class="remove" data-id="${id}">✕</div>`;
            container.appendChild(bubble);
        });
    }

    function getInitials(name) {
        return name.split(' ').map(s => s[0] || '').slice(0, 2).join('').toUpperCase();
    }

    // when Add member clicked -> save draft then go to friend.html
    document.getElementById('addMembersBtn').addEventListener('click', () => {
        const draft = {
            title: document.getElementById('wsTitle').value,
            description: document.getElementById('wsDesc').value,
            members: JSON.parse(localStorage.getItem('currentWorkspaceDraft') || '{}').members || []
        };
        localStorage.setItem('currentWorkspaceDraft', JSON.stringify(draft));
        window.location.href = 'friend.html';
    });

    // remove member from preview
    document.getElementById('membersPreview').addEventListener('click', (e) => {
        const rem = e.target.closest('.remove');
        if (!rem) return;
        const id = Number(rem.dataset.id);
        const draft = JSON.parse(localStorage.getItem('currentWorkspaceDraft') || '{}');
        draft.members = (draft.members || []).filter(m => m !== id);
        localStorage.setItem('currentWorkspaceDraft', JSON.stringify(draft));
        renderMembers(draft.members);
    });

    // save workspace permanently
    document.getElementById('saveWorkspace').addEventListener('click', () => {
        const title = document.getElementById('wsTitle').value.trim();
        if (!title) { alert('Please provide a title'); return; }
        const desc = document.getElementById('wsDesc').value.trim();
        const draft = JSON.parse(localStorage.getItem('currentWorkspaceDraft') || '{}');
        // ensure draft has members maintained
        const finalDraft = { title, description: desc, members: draft.members || [] };

        // push to 'workspaces' array
        const wsArray = JSON.parse(localStorage.getItem('workspaces') || '[]');
        wsArray.unshift(finalDraft);
        localStorage.setItem('workspaces', JSON.stringify(wsArray));

        // clear draft and go back to workspace list
        localStorage.removeItem('currentWorkspaceDraft');
        window.location.href = 'workspace.html';
    });

    // whenever inputs change, update the draft title/desc but keep members intact
    document.getElementById('wsTitle').addEventListener('input', (e) => {
        const draft = JSON.parse(localStorage.getItem('currentWorkspaceDraft') || '{}');
        draft.title = e.target.value;
        localStorage.setItem('currentWorkspaceDraft', JSON.stringify(draft));
    });
    document.getElementById('wsDesc').addEventListener('input', (e) => {
        const draft = JSON.parse(localStorage.getItem('currentWorkspaceDraft') || '{}');
        draft.description = e.target.value;
        localStorage.setItem('currentWorkspaceDraft', JSON.stringify(draft));
    });

    // on load, show members from draft
    (function init() {
        // ensure there is a draft object to avoid undefined
        if (!localStorage.getItem('currentWorkspaceDraft')) localStorage.setItem('currentWorkspaceDraft', JSON.stringify({ title: '', description: '', members: [] }));
        loadDraft();
        // also re-render members when draft changes in other page (friend.html) after returning
        window.addEventListener('storage', () => {
            const draft = JSON.parse(localStorage.getItem('currentWorkspaceDraft') || '{}');
            renderMembers(draft.members || []);
        });
    })();
</script>
</body>

</html>